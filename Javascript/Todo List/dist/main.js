(()=>{"use strict";let e=0;function t(e){return{name:e,tasks:[],tasksId:-1}}const l={addTask:function(e,t,l,s){const n={title:e,description:t,date:l,priority:s,id:this.tasks.length};this.tasks.push(n)},removeTask:function(e){this.tasks=this.tasks.filter(((t,l)=>{if(l!==e)return t}))}};if((()=>{const e=document.querySelector(".modal"),t=document.getElementById("modal1"),l=document.getElementById("modal2"),s=document.getElementById("projectBtn"),n=document.getElementById("taskBtn");s.addEventListener("click",(l=>{l.preventDefault(),e.style.display="block",t.style.display="block"})),n.addEventListener("click",(t=>{t.preventDefault(),e.style.display="block",l.style.display="block"})),window.onclick=function(s){s.target==e&&(t.style.display="none",l.style.display="none",e.style.display="none")}})(),!localStorage.getItem("Projects")){let e=[];e.push(t("Default")),localStorage.setItem("Projects",JSON.stringify(e))}const s=document.getElementById("addProjectBtn"),n=document.getElementById("addTaskBtn");function c(...e){e.forEach((e=>{e.value=""}))}s.addEventListener("click",(()=>{let e=JSON.parse(localStorage.getItem("Projects"));console.log(JSON.parse(localStorage.getItem("Projects")));const l=document.getElementById("projectName");void 0!==l&&""!==l&&(localStorage.getItem("projects")&&(e=JSON.parse(localStorage.getItem("projects"))),e.push(t(l.value)),localStorage.setItem("Projects",JSON.stringify(e)),document.querySelector(".modal").click(),d(e),c(l),document.querySelector(".tasksList").innerHTML="")})),n.addEventListener("click",(t=>{t.preventDefault();let s=JSON.parse(localStorage.getItem("Projects"));s.forEach((e=>{Object.assign(e,e,l)}));let n=document.getElementById("title");if(void 0===n.value||""===n.value)return;let d=document.getElementById("description"),a=document.getElementById("date"),i=document.getElementById("priority");s[e].addTask(function(e,t,l,s,n){return{title:e,description:t,date:l,priority:s,id:n}}(n.value,d.value,a.value,i.value,s[e].tasks.length)),localStorage.setItem("Projects",JSON.stringify(s)),document.querySelector(".modal").click(),o(),c(n,d,a)}));const o=()=>{let t=JSON.parse(localStorage.getItem("Projects"));t.forEach((e=>{Object.assign(e,e,l)}));const s=t[e].tasks,n=document.querySelector(".tasksList");n.innerHTML="",s.forEach(((l,s)=>{const c=document.createElement("div");c.classList.add("task");const o=document.createElement("div");o.classList.add("checkAndTitle");const d=document.createElement("input");d.type="checkbox",d.classList.add("checkbox"+s),d.addEventListener("click",(()=>{c.style.display="none",t[e].removeTask(s),localStorage.setItem("Projects",JSON.stringify(t))}));const a=document.createElement("div");a.classList.add("taskTitle"),a.innerText=l.title.title,o.appendChild(d),o.appendChild(a);const i=document.createElement("div");i.classList.add("date"),i.innerText=l.title.date;const r=document.createElement("div");r.classList.add("description"),r.innerText=l.title.description,r.style.display="none","medium"===l.title.priority?c.style.borderBottom="1px solid yellow":"high"===l.title.priority&&(c.style.borderBottom="1px solid red"),c.addEventListener("click",(()=>{"none"===r.style.display?r.style.display="block":r.style.display="none"})),c.appendChild(o),c.appendChild(i),c.appendChild(r),n.appendChild(c)}))},d=t=>{const l=document.querySelector(".projects");l.innerHTML="",t.forEach(((t,s)=>{let n=document.createElement("div");n.classList.add("project"),n.id="p"+s,n.innerText=t.name,n.addEventListener("click",(t=>{document.querySelectorAll(".project")[e].classList.remove("selected"),n.classList.add("selected"),e=s,o()})),l.appendChild(n)})),document.querySelectorAll(".project")[t.length-1].classList.add("selected"),e=t.length-1};window.addEventListener("load",(e=>{document.querySelectorAll(".project")[0].click()})),d(JSON.parse(localStorage.getItem("Projects")))})();